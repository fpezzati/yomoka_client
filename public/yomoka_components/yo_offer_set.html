<!--link rel="import" href="../bower_components/polymer/polymer.html"-->
<dom-module id="yo-offer-set">
    <style>

    </style>
    <template>
      <iron-ajax id="offerSetRead" handle-as="json" on-error="_offerError" on-response="_offerSetReadResp"></iron-ajax>
      <div class="table">
        <div class="tablehead">
          <div>Id</div><div>Description</div><div>Lat</div><div>Lon</div>
        </div>
        <template is="dom-repeat" items="[[offerSet]]">
          <div class="row">
            <div>[[item._id]]</div><div>[[item.description]]</div>
          </div>
        </template>
      </div>
      <div>
        <button on-tap="offerSetLoad">Load</button>
      </div>
      <div>
        [[errormsg]]
      </div>
    </template>
</dom-module>
<script>
    Polymer({
        is: "yo-offer-set",
        properties: {
          offerSet: {
            type: Array,
            notify: true
          },
          errormsg: {
            type: String,
            value: ''
          }
        },
        offerSetLoad: function() {
          this.$.offerSetRead.url = '/srv/offer/all';
          this.$.offerSetRead.generateRequest();
        },
        _offerSetReadResp: function(data) {
          this.offerSet = data.detail.response;
        },
        _offerError: function(data) {
          this.errormsg = data;
        }
    });
</script>
