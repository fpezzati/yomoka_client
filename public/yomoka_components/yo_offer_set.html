<!--link rel="import" href="../bower_components/polymer/polymer.html"-->
<dom-module id="yo-offer-set">
    <style>
      :host {
        display: block;
      }
      .yotable {
        display: table;
        table-layout: fixed;
      }
      .yorow {
        display: table-row;
        height: 25px;
        background-color: #ecf2f9;
        width: auto;
      }
      .yotableitem {
        display: table-cell;
        padding: 5px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    </style>
    <template>
      <iron-ajax id="offerSetRead" handle-as="json" on-error="_offerError" on-response="_offerSetReadResp"></iron-ajax>
      <div class="yotable">
        <div class="yorow">
          <div class="yotableitem" style="width:100px">Id</div>
          <div class="yotableitem" style="min-width:300px">Description</div>
          <div class="yotableitem" style="width:240px">Lat</div>
          <div class="yotableitem" style="width:240px">Lon</div>
        </div>
        <template is="dom-repeat" items="[[offerSet]]">
          <div class="yorow">
            <div class="yotableitem">[[item._id]]</div>
            <div class="yotableitem">[[item.description]]</div>
            <div class="yotableitem">[[item.latitude]]</div>
            <div class="yotableitem">[[item.longitude]]</div>
          </div>
        </template>
      </div>
      <div>
        <button on-tap="offerSetLoad">Load</button>
      </div>
      <div>
        [[errormsg]]
      </div>
    </template>
</dom-module>
<script>
    Polymer({
        is: "yo-offer-set",
        properties: {
          offerSet: {
            type: Array,
            notify: true
          },
          errormsg: {
            type: String,
            value: ''
          }
        },
        offerSetLoad: function() {
          this.$.offerSetRead.url = '/srv/offer/all';
          this.$.offerSetRead.generateRequest();
        },
        _offerSetReadResp: function(data) {
          this.offerSet = data.detail.response;
        },
        _offerError: function(data) {
          this.errormsg = data;
        }
    });
</script>
