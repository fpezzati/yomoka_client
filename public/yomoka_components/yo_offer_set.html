<!--link rel="import" href="../bower_components/polymer/polymer.html"-->
<dom-module id="yo-offer-set">
    <style>
      :host {}
      .yotable {
        display: table;
      }
      .yorow {
        display: table-row;
        height: 25px;
        background-color: #ecf2f9;
        width: auto;
      }
      .yotableitem .yotablehead {
        display: table-cell;
        float: left;
      }
      .yotablelastitem .yotablelasthead {
        display: table-cell;
        float: right;
      }
    </style>
    <template>
      <iron-ajax id="offerSetRead" handle-as="json" on-error="_offerError" on-response="_offerSetReadResp"></iron-ajax>
      <div class="yotable">
        <div class="yorow">
          <div class="yotablehead">Id</div><div class="yotablehead">Description</div><div class="yotablehead">Lat</div><div class="yotablelasthead">Lon</div>
        </div>
        <template is="dom-repeat" items="[[offerSet]]">
          <div class="yorow">
            <div class="yotableitem">[[item._id]]</div><div class="yotableitem">[[item.description]]</div><div class="yotableitem">[[item.latitude]]</div><div class="yotablelastitem">[[item.longitude]]</div>
          </div>
        </template>
      </div>
      <div>
        <button on-tap="offerSetLoad">Load</button>
      </div>
      <div>
        [[errormsg]]
      </div>
    </template>
</dom-module>
<script>
    Polymer({
        is: "yo-offer-set",
        properties: {
          offerSet: {
            type: Array,
            notify: true
          },
          errormsg: {
            type: String,
            value: ''
          }
        },
        offerSetLoad: function() {
          this.$.offerSetRead.url = '/srv/offer/all';
          this.$.offerSetRead.generateRequest();
        },
        _offerSetReadResp: function(data) {
          this.offerSet = data.detail.response;
        },
        _offerError: function(data) {
          this.errormsg = data;
        }
    });
</script>
